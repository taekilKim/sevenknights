<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>영웅 상세 - 세븐나이츠 리버스 도감</title>
  <meta name="description" content="세븐나이츠 리버스 영웅 상세 페이지" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="hero-detail-page">
  <header class="hero-header">
    <button class="back-button" onclick="window.history.back()">← 돌아가기</button>
  </header>

  <main class="hero-detail-container">
    <img id="hero-image" class="hero-detail-portrait" alt="영웅 초상화" />
    <h1 id="hero-name"></h1>
    <p id="hero-type"></p>
    <p id="hero-description"></p>
    <ul id="hero-skills"></ul>
  </main>

  <script>
    const params = new URLSearchParams(window.location.search);
    const heroId = params.get("id");

    if (!heroId) {
      document.querySelector("main").innerHTML = "<p>유효하지 않은 영웅 ID입니다.</p>";
    } else {
      fetch(`https://sk-dogam.app/api/hero/${heroId}`)
        .then(res => {
          if (!res.ok) throw new Error(`HTTP ${res.status}`);
          return res.json();
        })
        .then(data => {
          if (!data || !data.name) {
            document.querySelector("main").innerHTML = "<p>영웅 정보를 불러올 수 없습니다.</p>";
            return;
          }

          document.title = `${data.name} - 세븐나이츠 리버스 도감`;
          document.querySelector('meta[name="description"]').setAttribute("content", `${data.name}의 영웅 정보와 스킬 상세를 확인하세요.`);
          document.querySelector("#hero-image").src = data.portrait || "";
          document.querySelector("#hero-name").textContent = data.name || "이름 없음";
          document.querySelector("#hero-type").textContent = data.type || "";
          document.querySelector("#hero-description").textContent = data.description || "";

          if (data.skills && Array.isArray(data.skills)) {
            document.querySelector("#hero-skills").innerHTML = data.skills.map(skill => `<li>${skill}</li>`).join("");
          } else {
            document.querySelector("#hero-skills").innerHTML = "<li>등록된 스킬 정보가 없습니다.</li>";
          }
        })
        .catch(err => {
          console.error("Hero fetch error:", err);
          document.querySelector("main").innerHTML = "<p>데이터를 불러오는 중 오류가 발생했습니다.</p>";
        });
    }
  </script>
</body>
</html>