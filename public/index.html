<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>세븐나이츠 리버스 도감</title>
    <link rel="stylesheet" href="/style.css" />
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DMD8LXSEQ5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DMD8LXSEQ5');
</script>
  </head>
  <body>
    <div class="layout">
      <header class="header">
        <div class="header-logo">
          <img src="/images/logo.png" alt="세븐나이츠 리버스 도감 로고" />
        </div>
      </header>

      <aside class="sidebar-left">
        <nav>
          <ul>
            <li>영웅 도감</li>
            <li>장비 도감</li>
            <li>레이드 공략</li>
          </ul>
        </nav>
      </aside>

      <main class="content">
        <div id="heroes"></div>
      </main>

      <aside class="sidebar-right">
        <div>
          <h3>정렬 / 필터</h3>
          <div class="filter-section">
            <label for="filter-type">유형</label>
            <select id="filter-type">
              <option value="">전체</option>
              <option value="공격형">공격형</option>
              <option value="방어형">방어형</option>
              <option value="마법형">마법형</option>
              <option value="지원형">지원형</option>
              <option value="만능형">만능형</option>
            </select>
          </div>
          <div class="filter-section">
            <label for="filter-rarity">희귀도</label>
            <select id="filter-rarity">
              <option value="">전체</option>
              <option value="전설+">전설+</option>
              <option value="전설">전설</option>
              <option value="희귀">희귀</option>
              <option value="고급">고급</option>
            </select>
          </div>
        </div>
      </aside>
    </div>

    <!-- Global Loading Overlay -->
    <div id="global-loading" class="loading-container" aria-hidden="true" style="display:flex;">
      <div class="spinner"></div>
      <div class="loading-text">L O A D I N G</div>
    </div>

                    group.className = "hero-group";
                group.textContent = hero.group;
                card.appendChild(group);
            }

            // 등급 (숨김 처리)
            // if (hero.rarity) {
            //     const rarity = document.createElement("div");
            //     rarity.className = "hero-rarity";
            //     rarity.textContent = hero.rarity;
            //     card.appendChild(rarity);
            // }

            // 타입 텍스트 표시 부분 제거

            // 카드 클릭 시 상세 페이지로 이동 및 스크롤 위치 저장
            card.addEventListener("click", () => {
              sessionStorage.setItem('scrollPosition', window.scrollY);
              window.location.href = `/hero.html?id=${record.id}`;
            });
            heroesContainer.appendChild(card);
            });
        } catch (error) {
          console.error("에러:", error);
          document.getElementById("heroes").textContent = "데이터 불러오기 오류";
        } finally {
          showLoading(false);
        }
      }

      document.addEventListener("DOMContentLoaded", () => {
        const savedScroll = sessionStorage.getItem('scrollPosition');
        if (savedScroll) {
          window.scrollTo(0, parseInt(savedScroll));
          sessionStorage.removeItem('scrollPosition');
        }
      });

      fetchHeroes();
    </script>
  </body>
</html>