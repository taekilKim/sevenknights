<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œë¶ | ì˜ì›… ë„ê°, ìŠ¤íƒ¯, ìŠ¤í‚¬ ì •ë³´</title>
    <!-- SEO Meta Tags -->
    <meta name="description" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ì™„ë²½ ê°€ì´ë“œë¶ - ì „ ì˜ì›… ìŠ¤íƒ¯, ìŠ¤í‚¬, ì†Œì†, íƒ€ì… ì •ë³´ì™€ ê²°íˆ¬ì¥ ë± ê³µìœ . ê²°íˆ¬ì¥, ì´ë ¥ì „, ê¸¸ë“œì „ ê³µëµê¹Œì§€ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.">
    <meta name="keywords" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤, ì„¸ë‚˜ ë¦¬ë²„ìŠ¤, 7ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤, ì˜ì›… ë„ê°, ì˜ì›… ì •ë³´, ìŠ¤íƒ¯, ìŠ¤í‚¬, ê²°íˆ¬ì¥, ê²°ì¥, PVP, ê²°íˆ¬ì¥ ë±, ì´ë ¥ì „, ê¸¸ë“œì „, ì˜ì›… ê³µëµ, ìºë¦­í„° ì •ë³´, ë„·ë§ˆë¸”, Seven Knights Rebirth, ì„¸ë‚˜, ì•„ë ˆë‚˜">
    <meta name="author" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œë¶">
    <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="naverbot" content="index, follow">
    <meta name="subject" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œ, ê³µëµì§‘, ì˜ì›…ë³„ ìŠ¤í‚¬/ì¥ë¹„/ì†Œì†, ì½˜í…ì¸  ê³µëµ ì •ë³´">
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    <meta name="theme-color" content="#181818">
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œë¶ | ì˜ì›… ë„ê°, ìŠ¤íƒ¯, ìŠ¤í‚¬ ì •ë³´">
    <meta property="og:description" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ì „ ì˜ì›… ìŠ¤íƒ¯, ìŠ¤í‚¬, ì†Œì†, íƒ€ì… ì •ë³´ì™€ ê²°íˆ¬ì¥ ë± ê³µìœ . ê²°íˆ¬ì¥, ì´ë ¥ì „, ê¸¸ë“œì „ ê³µëµê¹Œì§€ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.">
    <meta property="og:image" content="https://sena-rebirth-guidebook.app/images/og-image.png">
    <meta property="og:url" content="https://sena-rebirth-guidebook.app/">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œë¶">
    <meta property="og:locale" content="ko_KR">
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œë¶ | ì˜ì›… ë„ê°, ìŠ¤íƒ¯, ìŠ¤í‚¬ ì •ë³´">
    <meta name="twitter:description" content="ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ì „ ì˜ì›… ìŠ¤íƒ¯, ìŠ¤í‚¬, ì†Œì†, íƒ€ì… ì •ë³´ì™€ ê²°íˆ¬ì¥ ë± ê³µìœ . ê²°íˆ¬ì¥, ì´ë ¥ì „, ê¸¸ë“œì „ ê³µëµê¹Œì§€ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.">
    <meta name="twitter:image" content="https://sena-rebirth-guidebook.app/images/og-image.png">
    <!-- Canonical Link -->
    <link rel="canonical" href="https://sena-rebirth-guidebook.app/" />
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œë¶",
      "url": "https://sena-rebirth-guidebook.app/",
      "description": "ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ì™„ë²½ ê°€ì´ë“œë¶ - ì „ ì˜ì›… ìŠ¤íƒ¯, ìŠ¤í‚¬, ì†Œì†, íƒ€ì… ì •ë³´ì™€ ê²°íˆ¬ì¥ ë± ê³µìœ ",
      "inLanguage": "ko",
      "about": {
        "@type": "VideoGame",
        "name": "ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ (Seven Knights Rebirth)",
        "alternateName": ["ì„¸ë‚˜ ë¦¬ë²„ìŠ¤", "7ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤"],
        "publisher": {
          "@type": "Organization",
          "name": "ë„·ë§ˆë¸”(Netmarble)"
        },
        "genre": ["RPG", "ìˆ˜ì§‘í˜• RPG", "ëª¨ë°”ì¼ ê²Œì„"],
        "gamePlatform": ["Android", "iOS"]
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://sena-rebirth-guidebook.app/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    <link rel="stylesheet" href="/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.2"></script>
    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DMD8LXSEQ5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-DMD8LXSEQ5');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7293515082092840"
     crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="layout">
      <header class="header">
        <div class="header-logo">
          <div class="header-title">ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ê°€ì´ë“œë¶</div>
        </div>
        <div class="header-actions">
          <button class="theme-toggle" id="theme-toggle" aria-label="í…Œë§ˆ ì „í™˜">
            <i class="ph-bold ph-sun" id="theme-icon"></i>
            <span id="theme-text">ë¼ì´íŠ¸ ëª¨ë“œ</span>
          </button>
        </div>
      </header>

      <aside class="sidebar-left">
        <nav>
          <ul>
            <li class="active">ì˜ì›… ë„ê°</li>
            <li><a href="/deck.html">ê²°íˆ¬ì¥ ë±</a></li>
          </ul>
        </nav>
      </aside>

      <main class="content">
        <h1>ì„¸ë¸ë‚˜ì´ì¸  ë¦¬ë²„ìŠ¤ ì˜ì›… ë„ê°</h1>
        <p class="subtitle">ëª¨ë“  ì˜ì›…ì˜ ëŠ¥ë ¥ì¹˜, ì†Œì†, ìŠ¤í‚¬, ì¥ë¹„ ì •ë³´ë¥¼ í•œëˆˆì— ë³¼ ìˆ˜ ìˆëŠ” ë„ê°</p>
        <div id="heroes"></div>
      </main>

      <aside class="sidebar-right">
        <div class="filter-container">
          <h3>í•„í„°</h3>

          <!-- ë“±ê¸‰ í•„í„° -->
          <div class="filter-group">
            <span class="filter-title">ë“±ê¸‰</span>
            <div class="filter-buttons" id="filter-rarity">
              <label><input type="checkbox" value="ì „ì²´" checked>ì „ì²´</label>
              <label><input type="checkbox" value="ì „ì„¤+">ì „ì„¤+</label>
              <label><input type="checkbox" value="ì „ì„¤">ì „ì„¤</label>
              <label><input type="checkbox" value="í¬ê·€">í¬ê·€</label>
            </div>
          </div>

          <!-- íƒ€ì… í•„í„° -->
          <div class="filter-group">
            <span class="filter-title">íƒ€ì…</span>
            <div class="filter-buttons" id="filter-type">
              <label><input type="checkbox" value="ì „ì²´" checked>ì „ì²´</label>
              <label><input type="checkbox" value="ê³µê²©í˜•">ê³µê²©í˜•</label>
              <label><input type="checkbox" value="ë§ˆë²•í˜•">ë§ˆë²•í˜•</label>
              <label><input type="checkbox" value="ë§ŒëŠ¥í˜•">ë§ŒëŠ¥í˜•</label>
              <label><input type="checkbox" value="ë°©ì–´í˜•">ë°©ì–´í˜•</label>
              <label><input type="checkbox" value="ì§€ì›í˜•">ì§€ì›í˜•</label>
            </div>
          </div>

          <!-- ì†Œì† í•„í„° -->
          <div class="filter-group">
            <span class="filter-title">ì†Œì†</span>
            <div class="filter-buttons" id="filter-group"></div>
          </div>

          <!-- ì •ë ¬ -->
          <h3>ì •ë ¬</h3>
          <div class="sort-buttons" id="sort-options">
            <label><input type="radio" name="sort" value="name" checked> ê°€ë‚˜ë‹¤ ìˆœ</label>
            <label><input type="radio" name="sort" value="attack"> ê³µê²©ë ¥ ë†’ì€ ìˆœ</label>
            <label><input type="radio" name="sort" value="hp"> ìƒëª…ë ¥ ë†’ì€ ìˆœ</label>
            <label><input type="radio" name="sort" value="rarity"> ë“±ê¸‰ ë†’ì€ ìˆœ</label>
          </div>
        </div>
      </aside>
    </div>

    <!-- Global Loading Overlay -->
    <div id="global-loading" class="loading-container" aria-hidden="true" style="display:flex;">
      <div class="spinner"></div>
      <div class="loading-text">L O A D I N G</div>
    </div>

    <script>
  function showLoading(on) {
    const el = document.getElementById("global-loading");
    if (!el) return;
    el.style.display = on ? "flex" : "none";
  }

  let allHeroes = [];

  async function fetchHeroes() {
    showLoading(true);
    try {
      const response = await fetch("/api/heroes");
      const data = await response.json();
      if (!data.records || !Array.isArray(data.records)) {
        console.error("ì„œë²„ ì‘ë‹µ:", data);
        return;
      }
      allHeroes = data.records;
      // === ì†Œì† í•„í„° ë™ì  ìƒì„± ===
      const groupFilterContainer = document.getElementById("filter-group");
      const uniqueGroups = [...new Set(allHeroes.map(hero => hero.group).filter(Boolean))].sort((a, b) => a.localeCompare(b, "ko"));
      groupFilterContainer.innerHTML = `
        <label><input type="checkbox" value="ì „ì²´" checked>ì „ì²´</label>
        ${uniqueGroups.map(group => `<label><input type="checkbox" value="${group}">${group}</label>`).join('')}
      `;
      const filtered = applyFiltersAndSort(allHeroes);
      renderHeroes(filtered);
    } catch (error) {
      console.error("ì—ëŸ¬:", error);
      document.getElementById("heroes").textContent = "ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì˜¤ë¥˜";
    } finally {
      showLoading(false);
    }
  }

  function renderHeroes(heroes) {
    const heroesContainer = document.getElementById("heroes");
    heroesContainer.innerHTML = "";
    heroes.forEach((record) => {
      const hero = record;
      const card = document.createElement("div");
      card.className = "hero-card";

      // === (êµ¬)ì„¸ë¸ë‚˜ì´ì¸  ì „ìš© data-group ì†ì„± ì¶”ê°€ ===
      if (hero.group) {
        card.setAttribute("data-group", hero.group);
        if (hero.group.includes("(êµ¬)ì„¸ë¸ë‚˜ì´ì¸ ")) {
          card.classList.add("old-sevenknights");
          console.log(`ğŸ’œ (êµ¬)ì„¸ë¸ë‚˜ì´ì¸  ê·¸ë£¹ ê°ì§€ë¨ â†’ ${hero.name}`);
        } else {
          console.log(`ğŸ’› ì¼ë°˜ ê·¸ë£¹ â†’ ${hero.name}`);
        }
      }

      // ì´ˆìƒ ì´ë¯¸ì§€ì™€ íƒ€ì… ë°°ì§€ ê°ì‹¸ëŠ” div
      if (hero.portrait) {
        const imgWrapper = document.createElement("div");
        imgWrapper.className = "hero-portrait-wrap";
        imgWrapper.style.position = "relative";

        const img = document.createElement("img");
        img.src = hero.portrait;
        img.alt = hero.name || "ì´ë¯¸ì§€ ì—†ìŒ";
        const rarityClass = (() => {
          switch (hero.rarity) {
            case "ì „ì„¤+": return "legendary-plus";
            case "ì „ì„¤": return "legendary";
            case "í¬ê·€": return "rare";
            case "ê³ ê¸‰": return "uncommon";
            default: return "normal";
          }
        })();
        img.className = `hero-portrait rarity-${rarityClass}`;
        if (hero.hasEffect === true || hero.hasEffect === "true" || hero.hasEffect === 1) {
          img.classList.add("has-effect");
        }
        imgWrapper.appendChild(img);

        // ë‹¤ì´ì•„ëª¬ë“œ íš¨ê³¼
        if (hero.hasEffect) {
          console.log(`ğŸŸ£ ${hero.name} | group:`, hero.group);
          const gradientId = `paint0_diamond_${hero.name.replace(/\s/g, '')}_${record.id}`;
          const starWrapper = document.createElement("div");
          starWrapper.className = "rarity-diamond-effect";
          starWrapper.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 100" fill="none">
              <defs>
                <linearGradient id="${gradientId}" x1="0" y1="0" x2="500" y2="500" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#FFF8E1"/>
                  <stop offset="0.533654" stop-color="#FFE082"/>
                  <stop offset="1" stop-color="#FFB300"/>
                </linearGradient>
              </defs>
              <path d="M99.0854 0.124826C99.6876 -0.259713 100.26 0.312411 99.8752 0.914611C74.5556 40.6083 73.1362 54.5342 90.8173 89.847C91.0858 90.3826 90.384 91.0844 89.8483 90.816L89.847 90.8174C54.5329 73.1375 40.6072 74.5546 0.914577 99.8752C0.312412 100.26 -0.259673 99.6876 0.124792 99.0854C25.4444 59.3918 26.8625 45.4671 9.18167 10.1521C8.9215 9.63314 9.57223 8.95807 10.1001 9.16059L10.1507 9.18308C45.4657 26.8639 59.3905 25.4457 99.0854 0.124826ZM65.703 34.2974C61.9959 35.3198 58.2999 36.037 54.5685 36.4171C48.0147 37.0846 41.7138 36.6839 35.4457 35.4467C36.6829 41.7148 37.0837 48.0156 36.4162 54.5693C36.0363 58.3003 35.3191 61.996 34.2969 65.7027C38.0036 64.6805 41.6993 63.9633 45.4303 63.5834C51.9843 62.9159 58.2853 63.3166 64.5537 64.5539C63.3165 58.2856 62.9157 51.9848 63.5833 45.4307C63.9634 41.6997 64.6808 38.0041 65.703 34.2974Z" fill="url(#${gradientId})"/>
            </svg>
          `;

          try {
            const stops = starWrapper.querySelectorAll(`#${gradientId} stop`);
            if (stops && stops.length >= 3) {
              const isOldSeven = hero.group && hero.group.trim().includes("(êµ¬)ì„¸ë¸ë‚˜ì´ì¸ ");
              if (isOldSeven) {
                stops[0].setAttribute("stop-color", "#EEDBFF");
                stops[1].setAttribute("stop-color", "#C49CFF");
                stops[2].setAttribute("stop-color", "#9C6BFF");
                console.log(`ğŸ’œ ë³´ë¼ìƒ‰ ì ìš©ë¨ â†’ ${hero.name}`);
              } else {
                stops[0].setAttribute("stop-color", "#FFF8E1");
                stops[1].setAttribute("stop-color", "#FFE082");
                stops[2].setAttribute("stop-color", "#FFB300");
                console.log(`ğŸ’› ì¼ë°˜ í™©ê¸ˆìƒ‰ ìœ ì§€ â†’ ${hero.name}`);
              }
            }
          } catch (e) {
            console.warn("ê·¸ë¼ë””ì–¸íŠ¸ ì ìš© ì‹¤íŒ¨:", e);
          }

          imgWrapper.appendChild(starWrapper);
        }

        if (hero.typeImage) {
          const typeBadge = document.createElement("img");
          typeBadge.src = hero.typeImage;
          typeBadge.alt = hero.type || "íƒ€ì… ë°°ì§€";
          typeBadge.className = "hero-type-badge";
          imgWrapper.appendChild(typeBadge);
        }

        card.appendChild(imgWrapper);
      }

      const name = document.createElement("div");
      name.className = "hero-name";
      name.textContent = hero.name || "ì´ë¦„ ì—†ìŒ";
      card.appendChild(name);

      if (hero.nickname) {
        const nickname = document.createElement("div");
        nickname.className = "hero-nickname";
        nickname.textContent = `${hero.nickname}`;
        card.appendChild(nickname);
      }

      const heroId = record.id;
      card.addEventListener("click", () => {
        sessionStorage.setItem("scrollPosition", window.scrollY);
        const heroName = encodeURIComponent(hero.name);
        window.location.href = `/hero.html?name=${heroName}`;
      });
      heroesContainer.appendChild(card);
    });
  }

  function applyFiltersAndSort(heroes) {
    const selectedRarity = [...document.querySelectorAll('#filter-rarity input:checked')].map(el => el.value);
    const selectedType = [...document.querySelectorAll('#filter-type input:checked')].map(el => el.value);
    const selectedGroup = [...document.querySelectorAll('#filter-group input:checked')].map(el => el.value);
    const sortOption = document.querySelector('input[name="sort"]:checked').value;

    let filtered = heroes.filter(hero => {
      const rarityMatch = selectedRarity.includes("ì „ì²´") || selectedRarity.includes(hero.rarity);
      const typeMatch = selectedType.includes("ì „ì²´") || selectedType.includes(hero.type);
      const groupMatch = selectedGroup.includes("ì „ì²´") || selectedGroup.includes(hero.group);
      return rarityMatch && typeMatch && groupMatch;
    });

    if (sortOption === "name") {
      filtered.sort((a, b) => a.name.localeCompare(b.name, "ko"));
    } else if (sortOption === "attack") {
      filtered.sort((a, b) => (b["ê³µê²©ë ¥"] || 0) - (a["ê³µê²©ë ¥"] || 0));
    } else if (sortOption === "hp") {
      filtered.sort((a, b) => (b["ìƒëª…ë ¥"] || 0) - (a["ìƒëª…ë ¥"] || 0));
    } else if (sortOption === "rarity") {
      const rarityOrder = ["(êµ¬)ì„¸ë¸ë‚˜ì´ì¸ ", "ì „ì„¤+", "ì „ì„¤", "í¬ê·€"];
      filtered.sort((a, b) => {
        const rarityA = rarityOrder.indexOf(a.group) >= 0 ? rarityOrder.indexOf(a.group) : rarityOrder.indexOf(a.rarity);
        const rarityB = rarityOrder.indexOf(b.group) >= 0 ? rarityOrder.indexOf(b.group) : rarityOrder.indexOf(b.rarity);
        if (rarityA === rarityB) return a.name.localeCompare(b.name, "ko");
        return rarityA - rarityB;
      });
    }
    return filtered;
  }

  document.addEventListener("DOMContentLoaded", () => {
    fetchHeroes();

    const savedScroll = sessionStorage.getItem("scrollPosition");
    if (savedScroll) {
      window.scrollTo(0, parseInt(savedScroll));
      sessionStorage.removeItem("scrollPosition");
    }

    document.querySelectorAll(
      '#filter-rarity input, #filter-type input, #filter-group input, input[name="sort"]'
    ).forEach(el => {
      el.addEventListener("change", () => {
        const filtered = applyFiltersAndSort(allHeroes);
        renderHeroes(filtered);
      });
    });

    // === ì „ì²´ ì„ íƒ ë¡œì§ ì¶”ê°€ ===
    ["filter-rarity", "filter-type", "filter-group"].forEach(groupId => {
      const container = document.getElementById(groupId);
      const checkboxes = container.querySelectorAll("input[type='checkbox']");

      checkboxes.forEach(checkbox => {
        checkbox.addEventListener("change", () => {
          const allOption = container.querySelector("input[value='ì „ì²´']");
          if (checkbox.value === "ì „ì²´" && checkbox.checked) {
            // ì „ì²´ ì„ íƒ ì‹œ ë‹¤ë¥¸ ì²´í¬ í•´ì œ
            checkboxes.forEach(cb => {
              if (cb !== allOption) cb.checked = false;
            });
          } else if (checkbox.value !== "ì „ì²´" && checkbox.checked) {
            // ë‹¤ë¥¸ ì˜µì…˜ ì„ íƒ ì‹œ ì „ì²´ í•´ì œ
            allOption.checked = false;
          } else {
            // ëª¨ë‘ í•´ì œëœ ê²½ìš° ì „ì²´ ë‹¤ì‹œ ì²´í¬
            const anyChecked = Array.from(checkboxes).some(cb => cb.checked && cb.value !== "ì „ì²´");
            if (!anyChecked) allOption.checked = true;
          }

          const filtered = applyFiltersAndSort(allHeroes);
          renderHeroes(filtered);
        });
      });
    });
  });
</script>

<script>
  // í…Œë§ˆ í† ê¸€ ê¸°ëŠ¥
  const themeToggle = document.getElementById('theme-toggle');
  const themeIcon = document.getElementById('theme-icon');
  const themeText = document.getElementById('theme-text');
  const htmlElement = document.documentElement;

  // ì €ì¥ëœ í…Œë§ˆ ë˜ëŠ” ì‹œìŠ¤í…œ ê¸°ë³¸ê°’ ê°€ì ¸ì˜¤ê¸°
  function getInitialTheme() {
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      return savedTheme;
    }
    // ì‹œìŠ¤í…œ ë‹¤í¬ ëª¨ë“œ ì„¤ì • í™•ì¸
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    return prefersDark ? 'dark' : 'light';
  }

  // í…Œë§ˆ ì ìš©
  function applyTheme(theme) {
    if (theme === 'light') {
      htmlElement.setAttribute('data-theme', 'light');
      themeIcon.className = 'ph-bold ph-moon';
      themeText.textContent = 'ë‹¤í¬ ëª¨ë“œ';
    } else {
      htmlElement.removeAttribute('data-theme');
      themeIcon.className = 'ph-bold ph-sun';
      themeText.textContent = 'ë¼ì´íŠ¸ ëª¨ë“œ';
    }
    localStorage.setItem('theme', theme);
  }

  // í…Œë§ˆ ì „í™˜
  function toggleTheme() {
    const currentTheme = htmlElement.getAttribute('data-theme') === 'light' ? 'light' : 'dark';
    const newTheme = currentTheme === 'light' ? 'dark' : 'light';
    applyTheme(newTheme);
  }

  // ì´ˆê¸° í…Œë§ˆ ì ìš©
  applyTheme(getInitialTheme());

  // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
  themeToggle.addEventListener('click', toggleTheme);

  // ì‹œìŠ¤í…œ í…Œë§ˆ ë³€ê²½ ê°ì§€ (ì„ íƒì‚¬í•­)
  window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
    if (!localStorage.getItem('theme')) {
      applyTheme(e.matches ? 'dark' : 'light');
    }
  });
</script>

  </body>
</html>